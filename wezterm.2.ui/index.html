<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>abrahamsustaita.com</title>
<link rel=stylesheet href=/css/style.min.30c0dade2f02539d7dc766b3af068d6050f2890d6142bf57546f95c25e6d20b3.css integrity="sha256-MMDa3i8CU519x2azrwaNYFDyiQ1hQr9XVG+Vwl5tILM="><link rel=icon type=image/x-icon href=/favicon.ico></head><body><div id=terminal><div class=window-header><div class="window-button close"></div><div class="window-button minimize"></div><div class="window-button maximize"></div></div><div class=terminal-content><div class=command-line><span class=prompt>me@abrahamsustaita.com:~$</span>
<span class=command>cat wezterm.2.ui.md</span></div><article class=post-content><h1 class=post-title>WezTerm Configuration 2: UI</h1><div class=post-meta>üìÜ December 25, 2024 üìñ 5 min</div><p>In order to configure the WezTerm to have a nicer style, create the file <code>ui.lua</code> and update your <code>wezterm.lua</code> file
like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- ... the previous Configuration</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>ui</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;ui&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ui.set_ui</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ui.set_smart_splits</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>And in the <code>ui.lua</code> file add:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>wezterm</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;wezterm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@class WezModule</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>M</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@type number|nil</span>
</span></span><span class=line><span class=cl><span class=n>M.last_tab</span> <span class=o>=</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param tab_info table</span>
</span></span><span class=line><span class=cl><span class=c1>---@return string</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>get_tab_title</span><span class=p>(</span><span class=n>tab_info</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>title</span> <span class=o>=</span> <span class=n>tab_info.tab_title</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=p>(</span><span class=n>title</span> <span class=ow>and</span> <span class=o>#</span><span class=n>title</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=ow>and</span> <span class=n>title</span> <span class=ow>or</span> <span class=n>tab_info.active_pane</span><span class=p>.</span><span class=n>title</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param window table</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>create_workspace_status</span><span class=p>(</span><span class=n>window</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>status</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=s2>&#34;rgba(35, 33, 54, 0.95)&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=n>arrow</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=s2>&#34;rgba(35, 33, 54, 0.95)&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>if</span> <span class=n>window</span><span class=p>:</span><span class=n>leader_is_active</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=n>status.background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=s2>&#34;#eb6f92&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>if</span> <span class=n>window</span><span class=p>:</span><span class=n>active_tab</span><span class=p>():</span><span class=n>tab_id</span><span class=p>()</span> <span class=o>~=</span> <span class=mi>0</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=n>status.arrow</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=s2>&#34;#1e2030&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param battery_state string</span>
</span></span><span class=line><span class=cl><span class=c1>---@return string</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>get_battery_icon</span><span class=p>(</span><span class=n>battery_state</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>icons</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;AC attached&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîå&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Full&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîå&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Unknown&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîå&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Finishing charge&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîå&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Charging&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîå&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Discharging&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;üîã&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=s2>&#34;Battery Warning&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;ü™´&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>icons</span><span class=p>[</span><span class=n>battery_state</span><span class=p>]</span> <span class=ow>or</span> <span class=s2>&#34;üîã&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param time_seconds number</span>
</span></span><span class=line><span class=cl><span class=c1>---@return string</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>format_time_remaining</span><span class=p>(</span><span class=n>time_seconds</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>if</span> <span class=n>time_seconds</span> <span class=o>&lt;=</span> <span class=mi>0</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=kr>return</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>hours</span> <span class=o>=</span> <span class=n>math.floor</span><span class=p>(</span><span class=n>time_seconds</span> <span class=o>/</span> <span class=mi>3600</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>minutes</span> <span class=o>=</span> <span class=n>math.floor</span><span class=p>((</span><span class=n>time_seconds</span> <span class=o>%</span> <span class=mi>3600</span><span class=p>)</span> <span class=o>/</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>string.format</span><span class=p>(</span><span class=s2>&#34; ‚è≥%02d:%02d&#34;</span><span class=p>,</span> <span class=n>hours</span><span class=p>,</span> <span class=n>minutes</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param battery table</span>
</span></span><span class=line><span class=cl><span class=c1>---@return string</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>format_battery_info</span><span class=p>(</span><span class=n>battery</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>icon</span> <span class=o>=</span> <span class=n>get_battery_icon</span><span class=p>(</span><span class=n>battery.state</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>percentage</span> <span class=o>=</span> <span class=n>string.format</span><span class=p>(</span><span class=s2>&#34;%.0f%%&#34;</span><span class=p>,</span> <span class=n>battery.state_of_charge</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>time_remaining</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>if</span> <span class=n>battery.state</span> <span class=o>==</span> <span class=s2>&#34;Discharging&#34;</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=n>time_remaining</span> <span class=o>=</span> <span class=n>battery.time_to_empty</span> <span class=ow>or</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl> <span class=kr>elseif</span> <span class=n>battery.state</span> <span class=o>==</span> <span class=s2>&#34;Charging&#34;</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=n>time_remaining</span> <span class=o>=</span> <span class=n>battery.time_to_full</span> <span class=ow>or</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>string.format</span><span class=p>(</span><span class=s2>&#34; %s%s%s&#34;</span><span class=p>,</span> <span class=n>icon</span><span class=p>,</span> <span class=n>percentage</span><span class=p>,</span> <span class=n>format_time_remaining</span><span class=p>(</span><span class=n>time_remaining</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@class StyleColors</span>
</span></span><span class=line><span class=cl><span class=c1>---@field edge string</span>
</span></span><span class=line><span class=cl><span class=c1>---@field background string</span>
</span></span><span class=line><span class=cl><span class=c1>---@field foreground string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param text string</span>
</span></span><span class=line><span class=cl><span class=c1>---@param colors StyleColors</span>
</span></span><span class=line><span class=cl><span class=c1>---@return table[]</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>create_styled_section</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>colors</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.edge</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.background</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34;ÓÇ∂&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.background</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.foreground</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=n>text</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Background</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.edge</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=n>colors.background</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34;ÓÇ¥&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param window table</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>update_right_status</span><span class=p>(</span><span class=n>window</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>colors</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>edge</span> <span class=o>=</span> <span class=s2>&#34;rgba(35, 33, 54, 0.95)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>background</span> <span class=o>=</span> <span class=s2>&#34;#9ccfd8&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>foreground</span> <span class=o>=</span> <span class=s2>&#34;#2e3440&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>date</span> <span class=o>=</span> <span class=n>wezterm.strftime</span><span class=p>(</span><span class=s2>&#34;üìÖ %b, %d &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>time</span> <span class=o>=</span> <span class=n>wezterm.strftime</span><span class=p>(</span><span class=s2>&#34;üïì %H:%M &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>battery</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>b</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>wezterm.battery_info</span><span class=p>())</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>  <span class=n>battery</span> <span class=o>=</span> <span class=n>battery</span> <span class=o>..</span> <span class=n>format_battery_info</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>components</span> <span class=o>=</span> <span class=p>{</span> <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>sections</span> <span class=o>=</span> <span class=p>{</span> <span class=n>date</span><span class=p>,</span> <span class=n>time</span><span class=p>,</span> <span class=n>battery</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>section</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>sections</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>  <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>item</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>create_styled_section</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>colors</span><span class=p>))</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>   <span class=n>table.insert</span><span class=p>(</span><span class=n>components</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>if</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=o>#</span><span class=n>sections</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>   <span class=n>table.insert</span><span class=p>(</span><span class=n>components</span><span class=p>,</span> <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34; &#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>   <span class=n>table.insert</span><span class=p>(</span><span class=n>components</span><span class=p>,</span> <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=kr>end</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=n>window</span><span class=p>:</span><span class=n>set_right_status</span><span class=p>(</span><span class=n>wezterm.format</span><span class=p>(</span><span class=n>components</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param tab table</span>
</span></span><span class=line><span class=cl><span class=c1>---@param max_width number</span>
</span></span><span class=line><span class=cl><span class=c1>---@return table</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>format_tab</span><span class=p>(</span><span class=n>tab</span><span class=p>,</span> <span class=n>max_width</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>colors</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>edge</span> <span class=o>=</span> <span class=s2>&#34;rgba(35, 33, 54, 0.95)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>background</span> <span class=o>=</span> <span class=n>tab.is_active</span> <span class=ow>and</span> <span class=s2>&#34;#ebbcba&#34;</span> <span class=ow>or</span> <span class=s2>&#34;#232136&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>foreground</span> <span class=o>=</span> <span class=n>tab.is_active</span> <span class=ow>and</span> <span class=s2>&#34;#2e3440&#34;</span> <span class=ow>or</span> <span class=s2>&#34;#d8dee9&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>icon</span> <span class=o>=</span> <span class=n>tab.is_active</span> <span class=ow>and</span> <span class=s2>&#34;üíª&#34;</span> <span class=ow>or</span> <span class=s2>&#34;üñ•Ô∏è&#34;</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>title</span> <span class=o>=</span> <span class=n>wezterm.truncate_right</span><span class=p>(</span><span class=n>get_tab_title</span><span class=p>(</span><span class=n>tab</span><span class=p>),</span> <span class=n>max_width</span> <span class=o>-</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>create_styled_section</span><span class=p>(</span><span class=n>icon</span> <span class=o>..</span> <span class=s2>&#34; &#34;</span> <span class=o>..</span> <span class=n>title</span><span class=p>,</span> <span class=n>colors</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=c1>---@param config table</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>M</span><span class=p>.</span><span class=nf>set_ui</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=n>wezterm.on</span><span class=p>(</span><span class=s2>&#34;update-status&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>status</span> <span class=o>=</span> <span class=n>create_workspace_status</span><span class=p>(</span><span class=n>window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>workspace_text</span> <span class=o>=</span> <span class=s2>&#34;   &#34;</span> <span class=o>..</span> <span class=n>window</span><span class=p>:</span><span class=n>active_workspace</span><span class=p>()</span> <span class=o>..</span> <span class=s2>&#34; &#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>window</span><span class=p>:</span><span class=n>set_left_status</span><span class=p>(</span><span class=n>wezterm.format</span><span class=p>({</span>
</span></span><span class=line><span class=cl>   <span class=n>status.background</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=n>workspace_text</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=n>status.arrow</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>update_right_status</span><span class=p>(</span><span class=n>window</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=n>wezterm.on</span><span class=p>(</span><span class=s2>&#34;format-tab-title&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>(</span><span class=n>tab</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>max_width</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>return</span> <span class=n>format_tab</span><span class=p>(</span><span class=n>tab</span><span class=p>,</span> <span class=n>max_width</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>config</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param pane table</span>
</span></span><span class=line><span class=cl><span class=c1>---@return boolean</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>is_vim</span><span class=p>(</span><span class=n>pane</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>pane</span><span class=p>:</span><span class=n>get_user_vars</span><span class=p>().</span><span class=n>IS_NVIM</span> <span class=o>==</span> <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param key string</span>
</span></span><span class=line><span class=cl><span class=c1>---@return string</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>get_direction</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>directions</span> <span class=o>=</span> <span class=p>{</span> <span class=n>h</span> <span class=o>=</span> <span class=s2>&#34;Left&#34;</span><span class=p>,</span> <span class=n>j</span> <span class=o>=</span> <span class=s2>&#34;Down&#34;</span><span class=p>,</span> <span class=n>k</span> <span class=o>=</span> <span class=s2>&#34;Up&#34;</span><span class=p>,</span> <span class=n>l</span> <span class=o>=</span> <span class=s2>&#34;Right&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=n>directions</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param resize_or_move &#34;resize&#34;|&#34;move&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>---@param key string</span>
</span></span><span class=line><span class=cl><span class=c1>---@return table</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>create_split_nav</span><span class=p>(</span><span class=n>resize_or_move</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>mods</span> <span class=o>=</span> <span class=n>resize_or_move</span> <span class=o>==</span> <span class=s2>&#34;resize&#34;</span> <span class=ow>and</span> <span class=s2>&#34;META&#34;</span> <span class=ow>or</span> <span class=s2>&#34;CTRL&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>key</span> <span class=o>=</span> <span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>mods</span> <span class=o>=</span> <span class=n>mods</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>action</span> <span class=o>=</span> <span class=n>wezterm.action_callback</span><span class=p>(</span><span class=kr>function</span><span class=p>(</span><span class=n>win</span><span class=p>,</span> <span class=n>pane</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=kr>if</span> <span class=n>is_vim</span><span class=p>(</span><span class=n>pane</span><span class=p>)</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>    <span class=n>win</span><span class=p>:</span><span class=n>perform_action</span><span class=p>({</span>
</span></span><span class=line><span class=cl>     <span class=n>SendKey</span> <span class=o>=</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=n>key</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=n>mods</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=n>pane</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=kr>else</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>action</span> <span class=o>=</span> <span class=n>resize_or_move</span> <span class=o>==</span> <span class=s2>&#34;resize&#34;</span> <span class=ow>and</span> <span class=p>{</span> <span class=n>AdjustPaneSize</span> <span class=o>=</span> <span class=p>{</span> <span class=n>get_direction</span><span class=p>(</span><span class=n>key</span><span class=p>),</span> <span class=mi>3</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=ow>or</span> <span class=p>{</span> <span class=n>ActivatePaneDirection</span> <span class=o>=</span> <span class=n>get_direction</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>win</span><span class=p>:</span><span class=n>perform_action</span><span class=p>(</span><span class=n>action</span><span class=p>,</span> <span class=n>pane</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=kr>end</span>
</span></span><span class=line><span class=cl>  <span class=kr>end</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>---@param config table</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>M</span><span class=p>.</span><span class=nf>set_smart_splits</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=kd>local</span> <span class=n>keys</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;h&#34;</span><span class=p>,</span> <span class=s2>&#34;j&#34;</span><span class=p>,</span> <span class=s2>&#34;k&#34;</span><span class=p>,</span> <span class=s2>&#34;l&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>key</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>keys</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>  <span class=n>table.insert</span><span class=p>(</span><span class=n>config.keys</span><span class=p>,</span> <span class=n>create_split_nav</span><span class=p>(</span><span class=s2>&#34;move&#34;</span><span class=p>,</span> <span class=n>key</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=n>table.insert</span><span class=p>(</span><span class=n>config.keys</span><span class=p>,</span> <span class=n>create_split_nav</span><span class=p>(</span><span class=s2>&#34;resize&#34;</span><span class=p>,</span> <span class=n>key</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=n>M</span>
</span></span></code></pre></td></tr></table></div></div></article></div></div></body></html>